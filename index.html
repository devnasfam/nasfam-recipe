<!DOCTYPE html>

<html>

    <head>

    <meta charset="utf-8"/>

    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="keyword" content="Ramadan Recipe Web App"/>

    <meta name="description" content="Ramadan Recipe Ideas, with videos and text tutorials">

     <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://kit.fontawesome.com/d3c9fc67a3.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="style.css">

        <title>Ramadan Recipe App</title>

    </head>

    <body>

    <main>

      <div id="root"></div>

    </main>

<script type="text/babel">

class Title extends React.Component {

  constructor(props) {

    super(props);

    this.state = {

      data: null,

      error: null,

      isLoading: true,

      isClicked: false

    }

    this.song = new Audio();

    this.song.src = "https://dl.dropbox.com/s/7ce620bvhyfnwd9/Humood_-_Marhab_Ya_Hilal_%28Fusha_Arabic%29_Lyrics_%2B_Translation_-_%D8%AD%D9%85%D9%88%D8%AF_-_%D9%85%D8%B1%D8%AD%D8%A8_%D9%8A%D8%A7_%D9%87%D9%84%D8%A7%D9%84_%D9%83%D9%84%D9%85%D8%A7%D8%AA%28128k%29.mp3?dl=0";

    this.Play = this.Play.bind(this);

  }

  componentDidMount() {

   setTimeout(()=>{

    fetch("https://www.themealdb.com/api/json/v1/1/random.php")

      .then(res => res.json())

      .then(data => {

        if (data && data.meals && data.meals.length > 0) {

          this.setState({ data: data.meals[0], error: null, isLoading: false });

        } else {

          this.setState({ data: null, error: "No meals found", isLoading: false });

        }

      })

      .catch(err => {

        console.log(err);

        this.setState({ data: null, error: "Error fetching data", isLoading: false });

      });

  },2500);

  }

  

  Generate = () => {

  fetch("https://www.themealdb.com/api/json/v1/1/random.php")

    .then(res => res.json())

    .then(data => {

      if (data && data.meals && data.meals.length > 0) {

     //   const mealName = data.meals[0].strMeal;

     //   const utterance = new SpeechSynthesisUtterance(mealName);

      //  speechSynthesis.speak(utterance);

        this.setState({ data: data.meals[0], error: null, isLoading: false, isClicked: false });

      } else {

        this.setState({ data: null, error: "No meals found", isLoading: false });

      }

    })

    .catch(err => {

      console.log(err);

      this.setState({ data: null, error: "Error fetching data", isLoading: false });

    });

}

  Play() {

    let audio = document.querySelector(".audio");

    if (this.song.paused) {

      this.song.play();

      this.song.loop = true;

      audio.innerHTML = `<i class="fa fa-volume-up"></i>`;

      audio.style.color = "dodgerblue";

    } else {

      this.song.pause();

      audio.innerHTML = `<i class="fa fa-volume-mute"></i>`;

      audio.style.color = "#494560";

    }

    }

  render() {

  function Ing(){

  let incont = document.querySelector(".incont");

  let inhead = document.querySelector(".inhead");

  let one = document.querySelector(".one");

  let two = document.querySelector(".two");

  let head = document.querySelector(".head");

  let recont = document.querySelector(".recipe_cont");

     // foot.style.display="none";

      head.style.display="none";

      recont.style.display="none";

      inhead.style.display="flex";

      incont.style.display="block";

      one.style.background="#494560";

      two.style.background="dodgerblue";

  }

  function Home(){

  let incont = document.querySelector(".incont");

  let inhead = document.querySelector(".inhead");

  let head = document.querySelector(".head");

  let recont = document.querySelector(".recipe_cont");

  let one = document.querySelector(".one");

  let two = document.querySelector(".two");

     // foot.style.display="none";

      head.style.display="flex";

      recont.style.display="block";

      inhead.style.display="none";

      incont.style.display="none";

      two.style.background="#494560";

      one.style.background="dodgerblue";

  }

 let handleClick = () => {

    const { isClicked } = this.state;

  let popup = document.querySelector(".popup");

    if (!isClicked) {

  popup.style.display = "flex";

  popup.innerHTML="Liked! <i class='fa fa-heart'></i>";

      setTimeout(() => {

       popup.style.display = "none";

      }, 1500);

    } else {

     popup.style.display = "flex";

     popup.innerHTML="Disliked! <i class='fa fa-heart-broken'></i>";

      setTimeout(() => {

       popup.style.display = "none";

      }, 1500);

    }

    this.setState({ isClicked: !isClicked });

  };

    const { data, error, isLoading } = this.state;

    if (isLoading) {

      return(

      <div>

          <div className="loader">

          <div className="flex">

            <div className="logo"></div>

            <div className="loading">

            Ramadan Recipe App <br/>

            <div className="wrapper">

        <div className="circle"></div>

        <div className="circle"></div>

        <div className="circle"></div>

        <div className="shadow"></div>

        <div className="shadow"></div>

        <div className="shadow"></div>

           </div>

            </div>

          </div>

          </div>

     </div>

      );

    } else if (error) {

      return <div>{error}</div>;

    } else if (data) {

      return (

        <div>

          <div className="head">

            Ramadan Recipe App

          </div>

          <div className="recipe_cont">

          <div className="audio"

            onClick={this.Play}

            >

            <i className="fa fa-volume-mute">

            </i>

            </div>

            <div className="img"

              style={{ backgroundImage: `url(${this.state.data.strMealThumb})` }}

            ></div>

            <ul>

            <div className="recipe_name">

            Name: {data.strMeal}

            </div>

            <div className="recipe_cat">

            Category: {data.strCategory}

            </div>

            <div className="recipe_cat">

            Cuisine: {data.strArea}

            <div className={`heart ${this.state.isClicked ? "clicked" : ""}`} onClick={handleClick}>

        <i className={`fa ${this.state.isClicked ? "fa-heart" : "fa-heart-o"}`} />

      </div>

            </div>

            <div className="btn-cont">

            <button className="btn-gen"

            onClick={this.Generate}

            >GENERATE</button></div>

            </ul>

          </div>

          

           <div className="inhead">

          <i className="fa fa-angle-left"

          onClick={Home}

          ></i>

          <span className="intitle">

          Ingridients</span>

          </div>

          <div className="incont">

          <div className="texthead">

          Instructions

          </div>

           <div className="intext">

           {data.strInstructions}

          </div>

          <a href={data.strYoutube}>

          <div className="inyoutube">

          <i className="fa fa-youtube"></i>

          Watch Video

          </div>

          </a>

          </div>

          

          <div 

          className="footer">

              <div class="homef one"

              onClick={Home}

              >

                <i class="fa fa-home"></i>

                Home

              </div>

              <div class="homef two"

              onClick={Ing}

              >

                <i class="fa fa-cutlery"></i>

                Ingridients

              </div>

          </div>

          <div className="popup">

              

          </div>

        </div>

      );

    }

  }

}

function App() {

  return (

    <div>

      <Title />

    </div>

  );

}

ReactDOM.render(

  <App />,

  document.getElementById("root")

);

</script>

    </body>

</html>
